

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Scaling individual services &mdash; Rackspace Private Cloud 14.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/privatecloud.ico"/>
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'14.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: ''
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/bespoke.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/bolditalic.css" type="text/css" />
    <link rel="next" title="Scaling services with new deployment groups" href="sec-containers-scaling-services-deployment-groups.html" />
    <link rel="prev" title="Containers" href="../ch-containers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> Rackspace Private Cloud
          

          
            
            <img src="../../_static/privatecloud.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                r14-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Rackspace Private Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-faq-external/index.html">Technical FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-ironic/index.html">Bare Metal Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-appformix-external/index.html">Optimization and Visualization User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-swift/index.html">Stand-alone Object Storage for RPCO Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Internal documents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../rpc-faq-internal/index.html">Technical FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-install-internal/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-magnum/index.html">Magnum Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-monitoring-internal/index.html">Monitoring and Logging Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Operations Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../preface.html">Preface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-verify.html">Verifying cloud deployment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-access.html">Access</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-instances.html">Instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-images.html">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-compute.html">Compute</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-galera.html">Managing Galera clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-ceph.html">RPC Ceph operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-swift.html">Managing Object Storage for multiple regions</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../ch-containers.html">Containers</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Scaling individual services</a></li>
<li class="toctree-l3"><a class="reference internal" href="sec-containers-scaling-services-deployment-groups.html">Scaling services with new deployment groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="sec-containers-destroy-recreate-containers.html">Destroying and recreating containers</a></li>
<li class="toctree-l3"><a class="reference internal" href="sec-containers-archiving-containers.html">Archiving a container</a></li>
<li class="toctree-l3"><a class="reference internal" href="sec-containers-ansible-scripts.html">Finding Ansible scripts after installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="sec-containers-deployment-groups.html">Deployment groups</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../ch-lbaas.html">Load-Balancer-as-a-Service (LBaaS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ch-backups.html">Backups</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postface.html">Document history and additional information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../postface.html#disclaimer">Disclaimer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-sales-eng-internal/index.html">Rackspace Private Cloud Sales Engineering Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-upgrade-exp/index.html">Upgrade Expectations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rpc-upgrade-internal/index.html">Upgrade Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Rackspace Private Cloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../index.html">Operations Guide</a> &raquo;</li>
        
          <li><a href="../ch-containers.html">Containers</a> &raquo;</li>
        
      <li>Scaling individual services</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/rpc-ops-internal/containers/sec-containers-scale-individual-service.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="scaling-individual-services">
<h1>Scaling individual services<a class="headerlink" href="#scaling-individual-services" title="Permalink to this headline">#</a></h1>
<p>Individual OpenStack services, and other open source project services,
run within containers. It is possible to scale out these services by
modifying the <code class="docutils literal"><span class="pre">etc/openstack_deploy/openstack_user_config.yml</span></code> file.</p>
<ol class="arabic">
<li><p class="first">Navigate into the <code class="docutils literal"><span class="pre">etc/openstack_deploy/openstack_user_config.yml</span></code>
file.</p>
</li>
<li><p class="first">Access the deployment groups section of the configuration file.
Underneath the deployment group name, add an affinity value line to
container scales OpenStack services:</p>
<div class="highlight-ini"><div class="highlight"><pre><span></span><span class="na">infra_host</span>
   <span class="na">infra1:</span>
     <span class="na">ip: 10.10.236.100</span>
     <span class="c1"># Rabbitmq</span>
     <span class="na">affinity:</span>
       <span class="na">galera_container: 1</span>
       <span class="na">rabbit_mq_container: 2</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal"><span class="pre">galera_container</span></code> has a container value of one.
In practice, any containers that do not need adjustment can remain at
the default value of one, and should not be adjusted above or below
the value of one.</p>
<p>The affinity value for each container is set at one by default.
Adjust the affinity value to zero for situations where the OpenStack
services housed within a specific container will not be needed when
scaling out other required services.</p>
</li>
<li><p class="first">Update the container number listed under the <code class="docutils literal"><span class="pre">affinity</span></code>
configuration to the desired number. The above example has
<code class="docutils literal"><span class="pre">galera_container</span></code> set at one and <code class="docutils literal"><span class="pre">rabbit_mq_container</span></code> at two,
which scales RabbitMQ services, but leaves Galera services fixed.</p>
</li>
<li><p class="first">Run the appropriate playbook commands after changing the
configuration to create the new containers, and install the
appropriate services.</p>
<p>For example, run the <strong>openstack-ansible lxc-containers-create.yml
rabbitmq-install.yml</strong> commands from the
<code class="docutils literal"><span class="pre">openstack-ansible/playbooks</span></code> repository to complete the scaling
process described in the example above:</p>
<div class="highlight-console"><div class="highlight"><pre><span></span><span class="gp">$</span> <span class="nb">cd</span> openstack-ansible/playbooks
<span class="gp">$</span> openstack-ansible lxc-containers-create.yml rabbitmq-install.yml
</pre></div>
</div>
</li>
</ol>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="sec-containers-scaling-services-deployment-groups.html" class="btn btn-neutral float-right" title="Scaling services with new deployment groups" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../ch-containers.html" class="btn btn-neutral float-left" title="Containers" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rackspace

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>