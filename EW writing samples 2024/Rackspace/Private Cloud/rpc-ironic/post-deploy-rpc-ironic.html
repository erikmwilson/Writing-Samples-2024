

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Post-deployment image registration and node enrollment &mdash; Rackspace Private Cloud 14.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/privatecloud.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'14.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: ''
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../_static/bespoke.css" type="text/css" />
  <link rel="stylesheet" href="../_static/bolditalic.css" type="text/css" />
    <link rel="next" title="Optimization and Visualization User Guide" href="../rpc-appformix-external/index.html" />
    <link rel="prev" title="Ironic configuration" href="deploying-rpc-ironic.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Rackspace Private Cloud
          

          
            
            <img src="../_static/privatecloud.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                r14-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Rackspace Private Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-faq-external/index.html">Technical FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Bare Metal Service</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#deploying-ironic">Deploying Ironic</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="hardware-prereqs.html">Tested Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="hardware-prereqs.html#firmware-configuration-requirements">Firmware configuration requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="deploying-rpc-ironic.html">Ironic configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Post-deployment image registration and node enrollment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#creating-and-registering-images">Creating and registering images</a></li>
<li class="toctree-l4"><a class="reference internal" href="#registering-the-nodes">Registering the nodes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference external" href="https://docs.openstack.org/openstack-ansible-os_ironic/latest/configure-ironic.html#openstack-ansible-deployment">OSA Ironic deployment documentation</a></li>
<li class="toctree-l3"><a class="reference external" href="https://docs.openstack.org/openstack-ansible-os_ironic/latest/configure-ironic.html">OSA Ironic configuration documentation</a></li>
<li class="toctree-l3"><a class="reference external" href="https://docs.openstack.org/ironic/latest/install/configure-compute.html">Configure the Compute service to use the Bare Metal service</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#using-ironic">Using Ironic</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#troubleshooting-ironic">Troubleshooting Ironic</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#reference-materials">Reference materials</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-appformix-external/index.html">Optimization and Visualization User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-swift/index.html">Stand-alone Object Storage for RPCO Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Internal documents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../rpc-faq-internal/index.html">Technical FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-install-internal/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-magnum/index.html">Magnum Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-monitoring-internal/index.html">Monitoring and Logging Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-ops-internal/index.html">Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-sales-eng-internal/index.html">Rackspace Private Cloud Sales Engineering Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-upgrade-exp/index.html">Upgrade Expectations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-upgrade-internal/index.html">Upgrade Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rackspace Private Cloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Bare Metal Service</a> &raquo;</li>
        
      <li>Post-deployment image registration and node enrollment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rpc-ironic/post-deploy-rpc-ironic.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="post-deployment-image-registration-and-node-enrollment">
<h1>Post-deployment image registration and node enrollment<a class="headerlink" href="#post-deployment-image-registration-and-node-enrollment" title="Permalink to this headline">#</a></h1>
<div class="section" id="creating-and-registering-images">
<h2>Creating and registering images<a class="headerlink" href="#creating-and-registering-images" title="Permalink to this headline">#</a></h2>
<p>To create images for ironic, you must use the
<code class="docutils literal"><span class="pre">diskimage-builder</span></code>.</p>
<ol class="arabic">
<li><p class="first">Follow <a class="reference external" href="https://docs.openstack.org/diskimage-builder/latest/">the upstream documentation</a> to install
<code class="docutils literal"><span class="pre">diskimage-builder</span></code>.</p>
</li>
<li><p class="first">After you have successfully installed the <code class="docutils literal"><span class="pre">diskimage-builder</span></code>,
clone <a class="reference external" href="https://github.com/osic/osic-elements">osic-elements</a> from
Github to <code class="docutils literal"><span class="pre">/opt/osic-elements</span></code>.</p>
</li>
<li><p class="first">Create the deploy and final deploy images:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>The steps below create images for Ubuntu Xenial, Trusty and
CentOS 7. They are to be run from the deployment host as a
script.</p>
<p>This deployment requires raid tools for HP gear. The
<code class="docutils literal"><span class="pre">IRONIC_AGENT_VERSION</span></code> variable can be set to any stable
branch, Ocata or later.</p>
<p class="last">You need to clone <a class="reference external" href="https://github.com/openstack/openstack-ansible-ops">openstack-ansible-ops</a> repo to
<code class="docutils literal"><span class="pre">/opt/openstack-ansible-ops/</span></code> as it contains resources that
are needed.</p>
</div>
</li>
</ol>
<p>Navigate to <code class="docutils literal"><span class="pre">/opt/openstack-ansible-ops/scripts</span></code> and run the script
<code class="docutils literal"><span class="pre">ironic_generate-images.sh</span></code> to create a Ubuntu Xenial image for the
deploy image and Ubuntu Trusty/Xenial and CentOS 7 base images which
will be used for deployment on the Ironic node.</p>
</div>
<div class="section" id="registering-the-nodes">
<h2>Registering the nodes<a class="headerlink" href="#registering-the-nodes" title="Permalink to this headline">#</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This section relies on hardware configuration that makes it highly
dependent on the specific hardware you deploy. Keep in mind the
code examples below may not work for your configuration unless you
are working with the correct values. Ensure all variables match the
host.</p>
<p class="last">If the following commands do not work for your configuration,
reconfirm the node attributes.</p>
</div>
<p>You must inform ironic of the network interface cards which are part
of the node by creating a port with each NICâ€™s MAC address. These MAC
addresses are passed to the Networking service during instance
provisioning and used to configure the network appropriately.</p>
<p>From the <code class="docutils literal"><span class="pre">/opt/openstack-ansible-ops/scripts/</span></code> directory, you need
to modify <code class="docutils literal"><span class="pre">ironic_register-nodes.sh</span></code> to match the specifications of
your baremetal machine and then run it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For more information, see the <a class="reference external" href="https://github.com/osic/osic-clouds/blob/master/nextgen/admin-node-enrollment.md">OSIC Ansible documentation</a>
on how to perform this action on multiple nodes.</p>
<p class="last">For more information on altering the raid configuration with
Ironic, see the <a class="reference external" href="https://docs.openstack.org/ironic/latest/admin/raid.html">upstream Ironic raid documentation</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rpc-appformix-external/index.html" class="btn btn-neutral float-right" title="Optimization and Visualization User Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="deploying-rpc-ironic.html" class="btn btn-neutral float-left" title="Ironic configuration" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rackspace

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>