

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Upgrading from v10 (Juno) to v11 (Kilo) &mdash; Rackspace Private Cloud 14.0 documentation</title>
  

  
  
    <link rel="shortcut icon" href="../_static/privatecloud.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'14.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: ''
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
  <link rel="stylesheet" href="../_static/bespoke.css" type="text/css" />
  <link rel="stylesheet" href="../_static/bolditalic.css" type="text/css" />
    <link rel="next" title="Upgrade Guide" href="../rpc-upgrade-internal/index.html" />
    <link rel="prev" title="Upgrading from v11 (Kilo) to v12 (Liberty)" href="rpc-upgrade-v11-v12.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Rackspace Private Cloud
          

          
            
            <img src="../_static/privatecloud.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
              <div class="version">
                r14-dev
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Rackspace Private Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-faq-external/index.html">Technical FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-ironic/index.html">Bare Metal Service</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-appformix-external/index.html">Optimization and Visualization User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-releasenotes/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-swift/index.html">Stand-alone Object Storage for RPCO Guide</a></li>
</ul>
<p class="caption"><span class="caption-text">Internal documents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../rpc-faq-internal/index.html">Technical FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-install-internal/index.html">Installation Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-magnum/index.html">Magnum Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-monitoring-internal/index.html">Monitoring and Logging Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-ops-internal/index.html">Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-sales-eng-internal/index.html">Rackspace Private Cloud Sales Engineering Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Upgrade Expectations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="rpc-upgrade-v11-v12.html">Upgrading from v11 (Kilo) to v12 (Liberty)</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Upgrading from v10 (Juno) to v11 (Kilo)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#release-highlights">Release highlights</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-to-expect-during-the-upgrade-process">What to expect during the upgrade process</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../rpc-upgrade-internal/index.html">Upgrade Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Rackspace Private Cloud</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Upgrade Expectations</a> &raquo;</li>
        
      <li>Upgrading from v10 (Juno) to v11 (Kilo)</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rpc-upgrade-exp/rpc-upgrade-v10-v11.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="upgrading-from-v10-juno-to-v11-kilo">
<h1>Upgrading from v10 (Juno) to v11 (Kilo)<a class="headerlink" href="#upgrading-from-v10-juno-to-v11-kilo" title="Permalink to this headline">#</a></h1>
<div class="section" id="release-highlights">
<h2>Release highlights<a class="headerlink" href="#release-highlights" title="Permalink to this headline">#</a></h2>
<ul>
<li><p class="first"><strong>Multi-Region Swift Support</strong> – Ability to deploy a geographically
dispersed Swift cluster using standard playbooks across multiple
locations and enable automatic replication of objects to a
secondary site. If a catastrophic event occurs at the primary site,
data is safely stored at the secondary site.</p>
</li>
<li><p class="first"><strong>EMC VNX2 Support</strong> – Extension of our EMC support to include EMC
VNX2 further enabling customers who prefer to store their most
important asset - their data - on a storage device from a vendor
they trust.</p>
</li>
<li><p class="first">This offers:</p>
<blockquote>
<div><ul class="simple">
<li><strong>High Availability</strong> – Fully redundant Enterprise Class storage
system from the respected market leader EMC.</li>
<li><strong>Flexibility</strong> – Automated Storage Tiering across
Flash/SAS/NL-SAS disks, balancing cost with performance.</li>
<li><strong>Capability to attach cinder volumes to instances</strong> – Using iSCSI
and 10GbE quickly expands the storage available to instances.</li>
<li><strong>Live migration of instances</strong> – Increase application
availability with non-disruptive instance migrations between
compute nodes, as part of regular compute node maintenance or
upgrade work.</li>
<li><strong>Storage of glance images</strong> – Use the same storage system to
store Glance images, utilizing NFS over 10GbE.</li>
<li><strong>Online backups of cinder volumes</strong> - Protect critical data and
recover from logical corruption or data loss quickly by utilizing
snapshots to create crash-consistent instance backups.</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline">#</a></h2>
<ul>
<li><p class="first">All EMC VNX2 solutions must be designed in conjunction with a dSAN
Engineer to ensure correct customer fit.</p>
</li>
<li><p class="first">Fibre Channel (FC) is not supported.</p>
</li>
<li><p class="first"><strong>Ceph Support</strong> –Leverage standardized Ansible playbooks to quickly
and easily deploy a ceph cluster – a fully redundant storage system
with no single point of failure. In addition to providing customers
with the assurance that their critical data is safely stored, other
benefits are:</p>
<ul class="simple">
<li><strong>Flexible Standard Configurations</strong> -  High performance SSD and
high capacity NL-SAS based reference architectures provide
solutions that cater to different customer workloads.</li>
</ul>
<blockquote>
<div><ul>
<li><p class="first"><strong>Attach cinder volumes to instances</strong> – Quickly increase the
block storage available to an instance with RBD volumes.</p>
</li>
<li><p class="first"><strong>Boot instances with ephemeral disks</strong> – Respond to changing
workloads more quickly with lower instance boot times, as images
do not need to be copied to compute nodes. Reduce the amount of
local storage within compute nodes.</p>
</li>
<li><p class="first"><strong>Live migration of instances</strong> – Increase application
availability with non-disruptive instance migrations between
compute nodes, as part of regular compute node maintenance or
upgrade work.</p>
</li>
<li><p class="first"><strong>Store glance images</strong> – Ceph is multi-purpose, uses the same
storage system for nova-boot, cinder volumes, and glance image
storage.</p>
</li>
<li><p class="first"><strong>Online backups of Ceph volumes</strong> – Protect critical data and
recover from logical corruption or data loss quickly by utilizing
snapshots to create crash-consistent instance backups.</p>
</li>
<li><p class="first"><strong>Ceph cluster monitoring using MaaS</strong> – Provides greater insight
into cluster performance plus status metrics.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">CephFS and RADOS Gateway are not supported at this time.</p>
</div>
</li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="what-to-expect-during-the-upgrade-process">
<h2>What to expect during the upgrade process<a class="headerlink" href="#what-to-expect-during-the-upgrade-process" title="Permalink to this headline">#</a></h2>
<p>Rackspace recommends a six-hour maintenance window. Six hours was the
average maintenance window time needed to upgrade from Juno to Kilo.</p>
<p>It is important to understand that maintenance window time is <strong>not</strong>
the same as down time.</p>
<p>If the environment is using cinder, additional maintenance time is
required as outlined below. Internally we use the following
<strong>estimates</strong>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="59%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>With patching</strong></td>
<td>Estimate</td>
</tr>
<tr class="row-even"><td>Pre-deployment checks</td>
<td>0.5 hour</td>
</tr>
<tr class="row-odd"><td>Cinder bare metal migration</td>
<td>0.5 hour</td>
</tr>
<tr class="row-even"><td>Openstack upgrade</td>
<td>2.5 hours</td>
</tr>
<tr class="row-odd"><td>Nova host reboot</td>
<td>0.5 hour (all hosts reboot at the same time)</td>
</tr>
<tr class="row-even"><td>Infra nodes reboot</td>
<td>1 - 1.5 hours (we reboot one node at a time,
Neutron L3 impact expected)</td>
</tr>
<tr class="row-odd"><td>Post-deployment checks</td>
<td>0.5 - 1 hour</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>5.5 - 6.5 hour window with impact to customer instances, especially
during reboot of nova and cinder nodes. These reboots can be
combined into one window.</li>
<li>Neutron L3 components (floating IPs, neutron routing) are
unavailable for usually less than 5 minutes if the neutron L3/DHCP
agent boots successfully.</li>
<li>The cinder bare metal migration requires moving the tgtd and IP
information out of the container. This coincides with the cinder
node reboots during the patching section.</li>
<li>Currently, we expect to meet the required maximum down time of 60
minutes to do the cinder and nova nodes reboot.</li>
</ul>
<table border="1" class="docutils">
<colgroup>
<col width="66%" />
<col width="34%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Without patching</strong></td>
<td>Estimate</td>
</tr>
<tr class="row-even"><td>Pre-deployment checks</td>
<td>0.5 hour</td>
</tr>
<tr class="row-odd"><td>Cinder bare metal migration</td>
<td>0.5 hour</td>
</tr>
<tr class="row-even"><td>Openstack upgrade</td>
<td>2.5 hours</td>
</tr>
<tr class="row-odd"><td>Post-deployment checks</td>
<td>0.5 - 1 hour</td>
</tr>
</tbody>
</table>
<ul class="simple">
<li>4 - 4.5 hour window with minimized impact to customer instances.</li>
<li>Neutron L3 components (floating IPs, neutron routing) are briefly
unavailable for usually less than 1 minute if the neutron L3/DHCP
agent boots successfully.</li>
<li>The cinder bare metal migration requires moving the tgtd and IP
information out of the container. This is estimated to take up to 15
minutes, excluding instance shutdown and restart times.</li>
</ul>
<p>The host reboots in this case are optional, and are done to activate
the patches for the kernel keyring and libc vulnerability.</p>
<p>These time estimates are based on all playbooks running successfully
the first time and to a lesser extent to the number of nodes in the
cluster. If the playbooks must be rerun or if there are a large number
of nodes, the upgrade can take longer.</p>
<p>The instance down time is dependent on the cinder and nova host reboot
or cinder tgtd/IP migration and the reboot of neutron L3 components
(as described above) and the time needed to shutdown and restart the
actual instances.</p>
<p>The neutron L3 down time is additive to the nova and cinder down time
since we plan to reboot the cinder and nova nodes concurrently.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../rpc-upgrade-internal/index.html" class="btn btn-neutral float-right" title="Upgrade Guide" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="rpc-upgrade-v11-v12.html" class="btn btn-neutral float-left" title="Upgrading from v11 (Kilo) to v12 (Liberty)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rackspace

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>